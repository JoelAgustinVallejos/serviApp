<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Sistema de Turnos</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

 <h1>üìÖ Sistema de Turnos</h1>

<button type="button" onclick="logout()">Cerrar sesi√≥n</button>


<form id="formTurno">
  <input type="text" id="nombre" placeholder="Nombre" required />
  <input type="date" id="fecha" required />
  <input type="time" id="hora" required />
  <button type="submit">Guardar turno</button>
</form>

<h3>Mis Turnos Pedidos</h3>
<table border="1">
  <thead>
    <tr>
      <th>Nombre</th>
      <th>Fecha</th>
      <th>Hora</th>
      <th>Estado</th>
      <th>Acci√≥n</th>
    </tr>
  </thead>
  <tbody id="tablaMisTurnos">
    </tbody>
</table>

<p id="mensaje"></p>

<script>
  // üõ°Ô∏è Nueva validaci√≥n de seguridad
  const datosUsuario = JSON.parse(localStorage.getItem("usuario"));

  if (!datosUsuario) {
    window.location.href = "login.html";
  } else {
    // Limpiamos el rol por si tiene espacios
    const rol = datosUsuario.rol ? datosUsuario.rol.trim().toLowerCase() : "";
    
    // Si es admin, lo dejamos pasar (un admin tambi√©n puede pedir turnos)
    // O si prefieres que solo los 'user' entren, deja solo: if (rol !== "user")
    if (rol !== "user" && rol !== "admin") {
      alert("Acceso denegado");
      window.location.href = "login.html";
    }
  }

  function logout() {
    localStorage.removeItem("usuario");
    window.location.href = "login.html";
  }
</script>

<script src="turnos.js"></script>

</body>
</html>
